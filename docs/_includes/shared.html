<!--
AUTOGENERATED
Updates must be written to `shared.{css,js}` and synced with `rake maintain_assets`.
-->
<style>
:root {
  --rrf-red: #900;
  --rrf-red-hover: #5f0c0c;
  --rrf-light-red: #db2525;
  --rrf-light-red-hover: #b80404;
}
#rrfAccentBar {
  background-color: var(--rrf-red);
  height: .3em;
}
header nav { background-color: black; }

/* Header adjustments. */
h1 { font-size: 2rem; }
h2 { font-size: 1.7rem; }
h3 { font-size: 1.5rem; }
h4 { font-size: 1.3rem; }
h5 { font-size: 1.1rem; }
h6 { font-size: 1rem; }
h1, h2, h3, h4, h5, h6 {
  color: var(--rrf-red);
}
html[data-bs-theme="dark"] h1,
html[data-bs-theme="dark"] h2,
html[data-bs-theme="dark"] h3,
html[data-bs-theme="dark"] h4,
html[data-bs-theme="dark"] h5,
html[data-bs-theme="dark"] h6 {
  color: var(--rrf-light-red);
}

/* Improve code and code blocks. */

pre code, .trix-content pre {
  display: block;
  overflow-x: auto;
  padding: .5em !important;
}
code, .trix-content pre {
  --bs-code-color: black;
  background-color: #eee !important;
  border: 1px solid #aaa;
  border-radius: 3px;
  padding: .1em .3em;
}
html[data-bs-theme="dark"] code, html[data-bs-theme="dark"] .trix-content pre {
  --bs-code-color: white;
  background-color: #2b2b2b !important;
}

/* Anchors */
a:not(.nav-link) {
  text-decoration: none;
  color: var(--rrf-red);
}
a:hover:not(.nav-link) {
  text-decoration: underline;
  color: var(--rrf-red-hover);
}
html[data-bs-theme="dark"] a:not(.nav-link) { color: var(--rrf-light-red); }
html[data-bs-theme="dark"] a:hover:not(.nav-link) { color: var(--rrf-light-red-hover); }

</style>
<script>
;(() => {
  // Get the real mode from a selected mode. Anything other than "light" or "dark" is treated as
  // "system" mode.
  const rrfGetRealMode = (selectedMode) => {
    if (selectedMode === "light" || selectedMode === "dark") {
      return selectedMode
    }

    if (window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches) {
      return "dark"
    }

    return "light"
  }

  // Set the mode, given a "selected" mode.
  const rrfSetSelectedMode = (selectedMode) => {
    // Anything except "light" or "dark" is casted to "system".
    if (selectedMode !== "light" && selectedMode !== "dark") {
      selectedMode = "system"
    }

    // Store selected mode in `localStorage`.
    localStorage.setItem("rrfMode", selectedMode)

    // Set the mode selector to the selected mode.
    const modeComponent = document.getElementById("rrfModeComponent")
    if (modeComponent) {
      let labelHTML
      modeComponent.querySelectorAll("button[data-rrf-mode-value]").forEach((el) => {
        if (el.getAttribute("data-rrf-mode-value") === selectedMode) {
          el.classList.add("active")
          labelHTML = el.querySelector("i").outerHTML.replace("ms-2", "me-1")
        } else {
          el.classList.remove("active")
        }
      })
      modeComponent.querySelector("button[data-bs-toggle]").innerHTML = labelHTML
    }

    // Get the real mode to use.
    realMode = rrfGetRealMode(selectedMode)

    // Set the `realMode` effects.
    if (realMode === "light") {
      document.querySelectorAll(".rrf-light-mode").forEach((el) => {
        el.disabled = false
      })
      document.querySelectorAll(".rrf-dark-mode").forEach((el) => {
        el.disabled = true
      })
      document.querySelectorAll(".rrf-mode").forEach((el) => {
        el.setAttribute("data-bs-theme", "light")
      })
    } else if (realMode === "dark") {
      document.querySelectorAll(".rrf-light-mode").forEach((el) => {
        el.disabled = true
      })
      document.querySelectorAll(".rrf-dark-mode").forEach((el) => {
        el.disabled = false
      })
      document.querySelectorAll(".rrf-mode").forEach((el) => {
        el.setAttribute("data-bs-theme", "dark")
      })
    } else {
      console.log(`RRF: Unknown mode: ${mode}`)
    }
  }

  // Initialize dark/light mode before page fully loads to prevent flash.
  rrfSetSelectedMode(localStorage.getItem("rrfMode"))

  // Initialize dark/light mode after page load (mostly so mode component is updated).
  document.addEventListener("DOMContentLoaded", (event) => {
    rrfSetSelectedMode(localStorage.getItem("rrfMode"))

    // Also set up mode selector.
    document.querySelectorAll("#rrfModeComponent button[data-rrf-mode-value]").forEach((el) => {
      el.addEventListener("click", (event) => {
        rrfSetSelectedMode(event.target.getAttribute("data-rrf-mode-value"))
      })
    })
  })

  // Handle case where user changes system theme.
  if (window.matchMedia) {
    window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", () => {
      const selectedMode = localStorage.getItem("rrfMode")
      if (selectedMode !== "light" && selectedMode !== "dark") {
        rrfSetSelectedMode("system")
      }
    })
  }
})()

</script>
